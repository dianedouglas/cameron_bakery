{"version":3,"sources":["../../../src/php/datetime/strftime.js"],"names":[],"mappings":"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","file":"strftime.js","sourcesContent":["module.exports = function strftime (fmt, timestamp) {\n  //       discuss at: http://locutus.io/php/strftime/\n  //      original by: Blues (http://tech.bluesmoon.info/)\n  // reimplemented by: Brett Zamir (http://brett-zamir.me)\n  //         input by: Alex\n  //      bugfixed by: Brett Zamir (http://brett-zamir.me)\n  //      improved by: Brett Zamir (http://brett-zamir.me)\n  //           note 1: Uses global: locutus to store locale info\n  //        example 1: strftime(\"%A\", 1062462400); // Return value will depend on date and locale\n  //        returns 1: 'Tuesday'\n\n  var setlocale = require('../strings/setlocale')\n\n  var $global = (typeof window !== 'undefined' ? window : global)\n  $global.$locutus = $global.$locutus || {}\n  var $locutus = $global.$locutus\n\n  // ensure setup of localization variables takes place\n  setlocale('LC_ALL', 0)\n\n  var _xPad = function (x, pad, r) {\n    if (typeof r === 'undefined') {\n      r = 10\n    }\n    for (; parseInt(x, 10) < r && r > 1; r /= 10) {\n      x = pad.toString() + x\n    }\n    return x.toString()\n  }\n\n  var locale = $locutus.php.localeCategories.LC_TIME\n  var lcTime = $locutus.php.locales[locale].LC_TIME\n\n  var _formats = {\n    a: function (d) {\n      return lcTime.a[d.getDay()]\n    },\n    A: function (d) {\n      return lcTime.A[d.getDay()]\n    },\n    b: function (d) {\n      return lcTime.b[d.getMonth()]\n    },\n    B: function (d) {\n      return lcTime.B[d.getMonth()]\n    },\n    C: function (d) {\n      return _xPad(parseInt(d.getFullYear() / 100, 10), 0)\n    },\n    d: ['getDate', '0'],\n    e: ['getDate', ' '],\n    g: function (d) {\n      return _xPad(parseInt(this.G(d) / 100, 10), 0)\n    },\n    G: function (d) {\n      var y = d.getFullYear()\n      var V = parseInt(_formats.V(d), 10)\n      var W = parseInt(_formats.W(d), 10)\n\n      if (W > V) {\n        y++\n      } else if (W === 0 && V >= 52) {\n        y--\n      }\n\n      return y\n    },\n    H: ['getHours', '0'],\n    I: function (d) {\n      var I = d.getHours() % 12\n      return _xPad(I === 0 ? 12 : I, 0)\n    },\n    j: function (d) {\n      var ms = d - new Date('' + d.getFullYear() + '/1/1 GMT')\n      // Line differs from Yahoo implementation which would be\n      // equivalent to replacing it here with:\n      ms += d.getTimezoneOffset() * 60000\n      var doy = parseInt(ms / 60000 / 60 / 24, 10) + 1\n      return _xPad(doy, 0, 100)\n    },\n    k: ['getHours', '0'],\n    // not in PHP, but implemented here (as in Yahoo)\n    l: function (d) {\n      var l = d.getHours() % 12\n      return _xPad(l === 0 ? 12 : l, ' ')\n    },\n    m: function (d) {\n      return _xPad(d.getMonth() + 1, 0)\n    },\n    M: ['getMinutes', '0'],\n    p: function (d) {\n      return lcTime.p[d.getHours() >= 12 ? 1 : 0]\n    },\n    P: function (d) {\n      return lcTime.P[d.getHours() >= 12 ? 1 : 0]\n    },\n    s: function (d) {\n      // Yahoo uses return parseInt(d.getTime()/1000, 10);\n      return Date.parse(d) / 1000\n    },\n    S: ['getSeconds', '0'],\n    u: function (d) {\n      var dow = d.getDay()\n      return ((dow === 0) ? 7 : dow)\n    },\n    U: function (d) {\n      var doy = parseInt(_formats.j(d), 10)\n      var rdow = 6 - d.getDay()\n      var woy = parseInt((doy + rdow) / 7, 10)\n      return _xPad(woy, 0)\n    },\n    V: function (d) {\n      var woy = parseInt(_formats.W(d), 10)\n      var dow11 = (new Date('' + d.getFullYear() + '/1/1')).getDay()\n      // First week is 01 and not 00 as in the case of %U and %W,\n      // so we add 1 to the final result except if day 1 of the year\n      // is a Monday (then %W returns 01).\n      // We also need to subtract 1 if the day 1 of the year is\n      // Friday-Sunday, so the resulting equation becomes:\n      var idow = woy + (dow11 > 4 || dow11 <= 1 ? 0 : 1)\n      if (idow === 53 && (new Date('' + d.getFullYear() + '/12/31')).getDay() < 4) {\n        idow = 1\n      } else if (idow === 0) {\n        idow = _formats.V(new Date('' + (d.getFullYear() - 1) + '/12/31'))\n      }\n      return _xPad(idow, 0)\n    },\n    w: 'getDay',\n    W: function (d) {\n      var doy = parseInt(_formats.j(d), 10)\n      var rdow = 7 - _formats.u(d)\n      var woy = parseInt((doy + rdow) / 7, 10)\n      return _xPad(woy, 0, 10)\n    },\n    y: function (d) {\n      return _xPad(d.getFullYear() % 100, 0)\n    },\n    Y: 'getFullYear',\n    z: function (d) {\n      var o = d.getTimezoneOffset()\n      var H = _xPad(parseInt(Math.abs(o / 60), 10), 0)\n      var M = _xPad(o % 60, 0)\n      return (o > 0 ? '-' : '+') + H + M\n    },\n    Z: function (d) {\n      return d.toString().replace(/^.*\\(([^)]+)\\)$/, '$1')\n    },\n    '%': function (d) {\n      return '%'\n    }\n  }\n\n  var _date = (typeof timestamp === 'undefined')\n    ? new Date()\n    : (timestamp instanceof Date)\n      ? new Date(timestamp)\n      : new Date(timestamp * 1000)\n\n  var _aggregates = {\n    c: 'locale',\n    D: '%m/%d/%y',\n    F: '%y-%m-%d',\n    h: '%b',\n    n: '\\n',\n    r: 'locale',\n    R: '%H:%M',\n    t: '\\t',\n    T: '%H:%M:%S',\n    x: 'locale',\n    X: 'locale'\n  }\n\n  // First replace aggregates (run in a loop because an agg may be made up of other aggs)\n  while (fmt.match(/%[cDFhnrRtTxX]/)) {\n    fmt = fmt.replace(/%([cDFhnrRtTxX])/g, function (m0, m1) {\n      var f = _aggregates[m1]\n      return (f === 'locale' ? lcTime[m1] : f)\n    })\n  }\n\n  // Now replace formats - we need a closure so that the date object gets passed through\n  var str = fmt.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g, function (m0, m1) {\n    var f = _formats[m1]\n    if (typeof f === 'string') {\n      return _date[f]()\n    } else if (typeof f === 'function') {\n      return f(_date)\n    } else if (typeof f === 'object' && typeof f[0] === 'string') {\n      return _xPad(_date[f[0]](), f[1])\n    } else {\n      // Shouldn't reach here\n      return m1\n    }\n  })\n\n  return str\n}\n"]}