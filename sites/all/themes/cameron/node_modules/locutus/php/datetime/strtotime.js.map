{"version":3,"sources":["../../../src/php/datetime/strtotime.js"],"names":[],"mappings":"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","file":"strtotime.js","sourcesContent":["module.exports = function strtotime (text, now) {\n  //  discuss at: http://locutus.io/php/strtotime/\n  // original by: Caio Ariede (http://caioariede.com)\n  // improved by: Kevin van Zonneveld (http://kvz.io)\n  // improved by: Caio Ariede (http://caioariede.com)\n  // improved by: A. Matías Quezada (http://amatiasq.com)\n  // improved by: preuter\n  // improved by: Brett Zamir (http://brett-zamir.me)\n  // improved by: Mirko Faber\n  //    input by: David\n  // bugfixed by: Wagner B. Soares\n  // bugfixed by: Artur Tchernychev\n  // bugfixed by: Stephan Bösch-Plepelits (http://github.com/plepe)\n  //      note 1: Examples all have a fixed timestamp to prevent\n  //      note 1: tests to fail because of variable time(zones)\n  //   example 1: strtotime('+1 day', 1129633200)\n  //   returns 1: 1129719600\n  //   example 2: strtotime('+1 week 2 days 4 hours 2 seconds', 1129633200)\n  //   returns 2: 1130425202\n  //   example 3: strtotime('last month', 1129633200)\n  //   returns 3: 1127041200\n  //   example 4: strtotime('2009-05-04 08:30:00 GMT')\n  //   returns 4: 1241425800\n  //   example 5: strtotime('2009-05-04 08:30:00+00')\n  //   returns 5: 1241425800\n  //   example 6: strtotime('2009-05-04 08:30:00+02:00')\n  //   returns 6: 1241418600\n  //   example 7: strtotime('2009-05-04T08:30:00Z')\n  //   returns 7: 1241425800\n\n  var parsed\n  var match\n  var today\n  var year\n  var date\n  var days\n  var ranges\n  var len\n  var times\n  var regex\n  var i\n  var fail = false\n\n  if (!text) {\n    return fail\n  }\n\n  // Unecessary spaces\n  text = text.replace(/^\\s+|\\s+$/g, '')\n    .replace(/\\s{2,}/g, ' ')\n    .replace(/[\\t\\r\\n]/g, '')\n    .toLowerCase()\n\n  // in contrast to php, js Date.parse function interprets:\n  // dates given as yyyy-mm-dd as in timezone: UTC,\n  // dates with \".\" or \"-\" as MDY instead of DMY\n  // dates with two-digit years differently\n  // etc...etc...\n  // ...therefore we manually parse lots of common date formats\n  var pattern = new RegExp([\n    '^(\\\\d{1,4})',\n    '([\\\\-\\\\.\\\\/:])',\n    '(\\\\d{1,2})',\n    '([\\\\-\\\\.\\\\/:])',\n    '(\\\\d{1,4})',\n    '(?:\\\\s(\\\\d{1,2}):(\\\\d{2})?:?(\\\\d{2})?)?',\n    '(?:\\\\s([A-Z]+)?)?$'\n  ].join(''))\n  match = text.match(pattern)\n\n  if (match && match[2] === match[4]) {\n    if (match[1] > 1901) {\n      switch (match[2]) {\n        case '-':\n          // YYYY-M-D\n          if (match[3] > 12 || match[5] > 31) {\n            return fail\n          }\n\n          return new Date(match[1], parseInt(match[3], 10) - 1, match[5],\n          match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000\n        case '.':\n          // YYYY.M.D is not parsed by strtotime()\n          return fail\n        case '/':\n          // YYYY/M/D\n          if (match[3] > 12 || match[5] > 31) {\n            return fail\n          }\n\n          return new Date(match[1], parseInt(match[3], 10) - 1, match[5],\n          match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000\n      }\n    } else if (match[5] > 1901) {\n      switch (match[2]) {\n        case '-':\n          // D-M-YYYY\n          if (match[3] > 12 || match[1] > 31) {\n            return fail\n          }\n\n          return new Date(match[5], parseInt(match[3], 10) - 1, match[1],\n          match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000\n        case '.':\n          // D.M.YYYY\n          if (match[3] > 12 || match[1] > 31) {\n            return fail\n          }\n\n          return new Date(match[5], parseInt(match[3], 10) - 1, match[1],\n          match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000\n        case '/':\n          // M/D/YYYY\n          if (match[1] > 12 || match[3] > 31) {\n            return fail\n          }\n\n          return new Date(match[5], parseInt(match[1], 10) - 1, match[3],\n          match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000\n      }\n    } else {\n      switch (match[2]) {\n        case '-':\n          // YY-M-D\n          if (match[3] > 12 || match[5] > 31 || (match[1] < 70 && match[1] > 38)) {\n            return fail\n          }\n\n          year = match[1] >= 0 && match[1] <= 38 ? +match[1] + 2000 : match[1]\n          return new Date(year, parseInt(match[3], 10) - 1, match[5],\n          match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000\n        case '.':\n          // D.M.YY or H.MM.SS\n          if (match[5] >= 70) {\n            // D.M.YY\n            if (match[3] > 12 || match[1] > 31) {\n              return fail\n            }\n\n            return new Date(match[5], parseInt(match[3], 10) - 1, match[1],\n            match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000\n          }\n          if (match[5] < 60 && !match[6]) {\n            // H.MM.SS\n            if (match[1] > 23 || match[3] > 59) {\n              return fail\n            }\n\n            today = new Date()\n            return new Date(today.getFullYear(), today.getMonth(), today.getDate(),\n            match[1] || 0, match[3] || 0, match[5] || 0, match[9] || 0) / 1000\n          }\n\n          // invalid format, cannot be parsed\n          return fail\n        case '/':\n          // M/D/YY\n          if (match[1] > 12 || match[3] > 31 || (match[5] < 70 && match[5] > 38)) {\n            return fail\n          }\n\n          year = match[5] >= 0 && match[5] <= 38 ? +match[5] + 2000 : match[5]\n          return new Date(year, parseInt(match[1], 10) - 1, match[3],\n          match[6] || 0, match[7] || 0, match[8] || 0, match[9] || 0) / 1000\n        case ':':\n          // HH:MM:SS\n          if (match[1] > 23 || match[3] > 59 || match[5] > 59) {\n            return fail\n          }\n\n          today = new Date()\n          return new Date(today.getFullYear(), today.getMonth(), today.getDate(),\n          match[1] || 0, match[3] || 0, match[5] || 0) / 1000\n      }\n    }\n  }\n\n  // other formats and \"now\" should be parsed by Date.parse()\n  if (text === 'now') {\n    return now === null || isNaN(now)\n      ? new Date().getTime() / 1000 | 0\n      : now | 0\n  }\n  if (!isNaN(parsed = Date.parse(text))) {\n    return parsed / 1000 | 0\n  }\n  // Browsers !== Chrome have problems parsing ISO 8601 date strings, as they do\n  // not accept lower case characters, space, or shortened time zones.\n  // Therefore, fix these problems and try again.\n  // Examples:\n  //   2015-04-15 20:33:59+02\n  //   2015-04-15 20:33:59z\n  //   2015-04-15t20:33:59+02:00\n  pattern = new RegExp([\n    '^([0-9]{4}-[0-9]{2}-[0-9]{2})',\n    '[ t]',\n    '([0-9]{2}:[0-9]{2}:[0-9]{2}(\\\\.[0-9]+)?)',\n    '([\\\\+-][0-9]{2}(:[0-9]{2})?|z)'\n  ].join(''))\n  match = text.match(pattern)\n  if (match) {\n    // @todo: time zone information\n    if (match[4] === 'z') {\n      match[4] = 'Z'\n    } else if (match[4].match(/^([\\+-][0-9]{2})$/)) {\n      match[4] = match[4] + ':00'\n    }\n\n    if (!isNaN(parsed = Date.parse(match[1] + 'T' + match[2] + match[4]))) {\n      return parsed / 1000 | 0\n    }\n  }\n\n  date = now ? new Date(now * 1000) : new Date()\n  days = {\n    'sun': 0,\n    'mon': 1,\n    'tue': 2,\n    'wed': 3,\n    'thu': 4,\n    'fri': 5,\n    'sat': 6\n  }\n  ranges = {\n    'yea': 'FullYear',\n    'mon': 'Month',\n    'day': 'Date',\n    'hou': 'Hours',\n    'min': 'Minutes',\n    'sec': 'Seconds'\n  }\n\n  function lastNext (type, range, modifier) {\n    var diff\n    var day = days[range]\n\n    if (typeof day !== 'undefined') {\n      diff = day - date.getDay()\n\n      if (diff === 0) {\n        diff = 7 * modifier\n      } else if (diff > 0 && type === 'last') {\n        diff -= 7\n      } else if (diff < 0 && type === 'next') {\n        diff += 7\n      }\n\n      date.setDate(date.getDate() + diff)\n    }\n  }\n\n  function process (val) {\n    // @todo: Reconcile this with regex using \\s, taking into account\n    // browser issues with split and regexes\n    var splt = val.split(' ')\n    var type = splt[0]\n    var range = splt[1].substring(0, 3)\n    var typeIsNumber = /\\d+/.test(type)\n    var ago = splt[2] === 'ago'\n    var num = (type === 'last' ? -1 : 1) * (ago ? -1 : 1)\n\n    if (typeIsNumber) {\n      num *= parseInt(type, 10)\n    }\n\n    if (ranges.hasOwnProperty(range) && !splt[1].match(/^mon(day|\\.)?$/i)) {\n      return date['set' + ranges[range]](date['get' + ranges[range]]() + num)\n    }\n\n    if (range === 'wee') {\n      return date.setDate(date.getDate() + (num * 7))\n    }\n\n    if (type === 'next' || type === 'last') {\n      lastNext(type, range, num)\n    } else if (!typeIsNumber) {\n      return false\n    }\n\n    return true\n  }\n\n  times = '(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec' +\n    '|sunday|sun\\\\.?|monday|mon\\\\.?|tuesday|tue\\\\.?|wednesday|wed\\\\.?' +\n    '|thursday|thu\\\\.?|friday|fri\\\\.?|saturday|sat\\\\.?)'\n  regex = '([+-]?\\\\d+\\\\s' + times + '|' + '(last|next)\\\\s' + times + ')(\\\\sago)?'\n\n  match = text.match(new RegExp(regex, 'gi'))\n  if (!match) {\n    return fail\n  }\n\n  for (i = 0, len = match.length; i < len; i++) {\n    if (!process(match[i])) {\n      return fail\n    }\n  }\n\n  return (date.getTime() / 1000)\n}\n"]}