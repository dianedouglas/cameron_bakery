{"version":3,"sources":["../../../src/php/strings/strlen.js"],"names":[],"mappings":";;AAAA,OAAO,OAAP,GAAiB,SAAS,MAAT,CAAiB,MAAjB,EAAyB;;;;;;;;;;;;;;;;;AAiBxC,MAAI,MAAM,SAAS,EAAnB;;AAEA,MAAI,SAAS,CAAC,OAAO,OAAP,KAAmB,WAAnB,GAAiC,QAAQ,iBAAR,EAA2B,mBAA3B,CAAjC,GAAmF,SAApF,KAAkG,KAA/G;AACA,MAAI,WAAW,KAAf,EAAsB;AACpB,WAAO,IAAI,MAAX;AACD;;AAED,MAAI,IAAI,CAAR;AACA,MAAI,OAAO,CAAX;;AAEA,MAAI,eAAe,SAAf,YAAe,CAAU,GAAV,EAAe,CAAf,EAAkB;AACnC,QAAI,OAAO,IAAI,UAAJ,CAAe,CAAf,CAAX;AACA,QAAI,OAAO,EAAX;AACA,QAAI,OAAO,EAAX;AACA,QAAI,QAAQ,MAAR,IAAkB,QAAQ,MAA9B,EAAsC;;;AAGpC,UAAI,IAAI,MAAJ,IAAe,IAAI,CAAvB,EAA2B;AACzB,cAAM,IAAI,KAAJ,CAAU,gDAAV,CAAN;AACD;AACD,aAAO,IAAI,UAAJ,CAAe,IAAI,CAAnB,CAAP;AACA,UAAI,OAAO,MAAP,IAAiB,OAAO,MAA5B,EAAoC;AAClC,cAAM,IAAI,KAAJ,CAAU,gDAAV,CAAN;AACD;AACD,aAAO,IAAI,MAAJ,CAAW,CAAX,IAAgB,IAAI,MAAJ,CAAW,IAAI,CAAf,CAAvB;AACD,KAXD,MAWO,IAAI,QAAQ,MAAR,IAAkB,QAAQ,MAA9B,EAAsC;;AAE3C,UAAI,MAAM,CAAV,EAAa;AACX,cAAM,IAAI,KAAJ,CAAU,gDAAV,CAAN;AACD;AACD,aAAO,IAAI,UAAJ,CAAe,IAAI,CAAnB,CAAP;AACA,UAAI,OAAO,MAAP,IAAiB,OAAO,MAA5B,EAAoC;;;AAGlC,cAAM,IAAI,KAAJ,CAAU,gDAAV,CAAN;AACD;;;AAGD,aAAO,KAAP;AACD;AACD,WAAO,IAAI,MAAJ,CAAW,CAAX,CAAP;AACD,GA/BD;;AAiCA,OAAK,IAAI,CAAJ,EAAO,OAAO,CAAnB,EAAsB,IAAI,IAAI,MAA9B,EAAsC,GAAtC,EAA2C;AACzC,QAAK,aAAa,GAAb,EAAkB,CAAlB,CAAD,KAA2B,KAA/B,EAAsC;AACpC;AACD;;;;;AAKD;AACD;;AAED,SAAO,IAAP;AACD,CAxED","file":"strlen.js","sourcesContent":["module.exports = function strlen (string) {\n  //  discuss at: http://locutus.io/php/strlen/\n  // original by: Kevin van Zonneveld (http://kvz.io)\n  // improved by: Sakimori\n  // improved by: Kevin van Zonneveld (http://kvz.io)\n  //    input by: Kirk Strobeck\n  // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman)\n  //  revised by: Brett Zamir (http://brett-zamir.me)\n  //      note 1: May look like overkill, but in order to be truly faithful to handling all Unicode\n  //      note 1: characters and to this function in PHP which does not count the number of bytes\n  //      note 1: but counts the number of characters, something like this is really necessary.\n  //   example 1: strlen('Kevin van Zonneveld')\n  //   returns 1: 19\n  //   example 2: ini_set('unicode.semantics', 'on')\n  //   example 2: strlen('A\\ud87e\\udc04Z')\n  //   returns 2: 3\n\n  var str = string + ''\n\n  var iniVal = (typeof require !== 'undefined' ? require('../info/ini_get')('unicode.semantics') : undefined) || 'off'\n  if (iniVal === 'off') {\n    return str.length\n  }\n\n  var i = 0\n  var lgth = 0\n\n  var getWholeChar = function (str, i) {\n    var code = str.charCodeAt(i)\n    var next = ''\n    var prev = ''\n    if (code >= 0xD800 && code <= 0xDBFF) {\n      // High surrogate (could change last hex to 0xDB7F to\n      // treat high private surrogates as single characters)\n      if (str.length <= (i + 1)) {\n        throw new Error('High surrogate without following low surrogate')\n      }\n      next = str.charCodeAt(i + 1)\n      if (next < 0xDC00 || next > 0xDFFF) {\n        throw new Error('High surrogate without following low surrogate')\n      }\n      return str.charAt(i) + str.charAt(i + 1)\n    } else if (code >= 0xDC00 && code <= 0xDFFF) {\n      // Low surrogate\n      if (i === 0) {\n        throw new Error('Low surrogate without preceding high surrogate')\n      }\n      prev = str.charCodeAt(i - 1)\n      if (prev < 0xD800 || prev > 0xDBFF) {\n        // (could change last hex to 0xDB7F to treat high private surrogates\n        // as single characters)\n        throw new Error('Low surrogate without preceding high surrogate')\n      }\n      // We can pass over low surrogates now as the second\n      // component in a pair which we have already processed\n      return false\n    }\n    return str.charAt(i)\n  }\n\n  for (i = 0, lgth = 0; i < str.length; i++) {\n    if ((getWholeChar(str, i)) === false) {\n      continue\n    }\n    // Adapt this line at the top of any loop, passing in the whole string and\n    // the current iteration and returning a variable to represent the individual character;\n    // purpose is to treat the first part of a surrogate pair as the whole character and then\n    // ignore the second part\n    lgth++\n  }\n\n  return lgth\n}\n"]}